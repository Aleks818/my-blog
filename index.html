<body>
  <div class="container">
    <header>
      <h1>üåç –ú–æ–π –ë–ª–æ–≥</h1>
      <p>–ò—Å—Ç–æ—Ä–∏–∏, –º—ã—Å–ª–∏ –∏ –æ—Ç–∫—Ä—ã—Ç–∏—è</p>
    </header>

    <!-- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ -->
    <div class="controls">
      <div class="search-box">
        <input type="text" id="searchInput" placeholder="–ü–æ–∏—Å–∫ –ø–æ —Å—Ç–∞—Ç—å—è–º..." />
      </div>
      <div class="theme-toggle">
        <button id="lightTheme">–°–≤–µ—Ç–ª–∞—è</button>
        <button id="darkTheme">–¢—ë–º–Ω–∞—è</button>
      </div>
    </div>

    <!-- –°–ø–∏—Å–æ–∫ —Å—Ç–∞—Ç–µ–π (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏) -->
    <section id="articles-list" class="articles">
      <!-- –°—é–¥–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤—è—Ç—Å—è —Å—Ç–∞—Ç—å–∏ -->
    </section>

    <footer>
      <p>&copy; 2025 –ú–æ–π –ë–ª–æ–≥. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.</p>
    </footer>
  </div>

  <!-- –°–∫—Ä–∏–ø—Ç –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –º–µ–Ω—é -->
  <script>
    // === –¢–µ–º–∞ ===
    const body = document.body;
    if (localStorage.getItem('theme') === 'dark') {
      body.classList.add('dark-theme');
    }
    document.getElementById('lightTheme')?.addEventListener('click', () => {
      body.classList.remove('dark-theme');
      localStorage.setItem('theme', 'light');
    });
    document.getElementById('darkTheme')?.addEventListener('click', () => {
      body.classList.add('dark-theme');
      localStorage.setItem('theme', 'dark');
    });

    // === –ü–æ–∏—Å–∫ ===
    const searchInput = document.getElementById('searchInput');
    let articles = [];

    // –ó–∞–≥—Ä—É–∂–∞–µ–º —Å–ø–∏—Å–æ–∫ —Å—Ç–∞—Ç–µ–π
    fetch('articles/')
      .then(response => response.text())
      .then(data => {
        const parser = new DOMParser();
        const doc = parser.parseFromString(data, 'text/html');
        const links = [...doc.querySelectorAll('a')]
          .map(a => a.href)
          .filter(href => href.endsWith('.html') && !href.includes('index.html'))
          .map(href => {
            const filename = href.split('/').pop().replace('.html', '');
            const title = decodeURIComponent(filename)
              .replace(/-/g, ' ')
              .replace(/\b\w/g, l => l.toUpperCase());
            return { href, title, filename };
          });

        const container = document.getElementById('articles-list');
        articles = links.map(article => {
          const div = document.createElement('div');
          div.className = 'article';
          div.setAttribute('data-title', article.title);
          div.innerHTML = `
            <h2><a href="${article.href}">${article.title}</a></h2>
            <p>–ß–∏—Ç–∞—Ç—å –¥–∞–ª–µ–µ ‚Üí</p>
          `;
          container.appendChild(div);
          return div;
        });

        // –ü–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—è–º —Å—Ç–∞—Ç–µ–π
        searchInput?.addEventListener('input', () => {
          const query = searchInput.value.toLowerCase();
          articles.forEach(articleEl => {
            const title = articleEl.getAttribute('data-title').toLowerCase();
            articleEl.style.display = title.includes(query) ? 'flex' : 'none';
          });
        });
      })
      .catch(() => {
        document.getElementById('articles-list').innerHTML = `
          <p>–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å —Å—Ç–∞—Ç—å–∏. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤–∫–ª—é—á—ë–Ω –ª–æ–∫–∞–ª—å–Ω—ã–π —Å–µ—Ä–≤–µ—Ä –∏–ª–∏ —Å–∞–π—Ç —Ä–∞–∑–º–µ—â—ë–Ω –Ω–∞ GitHub Pages.</p>
        `;
      });
  </script>
</body>
